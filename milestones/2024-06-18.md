# 2024-06-18

## 开发内容
- Electron
  - 游客模式
  - 离线模式
  - 菜单栏重做(前进, 后退, 刷新, 最小化, 最大化, 还原, 关闭)
  - 本地文件的解析和使用
    - 解析本地文件夹
    - 本地翻译(使用node环境, ICP通信翻译)
    - 启动时加载启动界面及相应的故障排查
    - 访问外部引用链接时, 跳转到默认浏览器中


- Web  (用户端, 管理端)
  

- 管理端开发
  - 权限改造
  - 用户改造
  - 机构管理
  - 角色管理 (用户端, 管理端)
  - 文档上传流程 (管理端)
  - 知识库整合
  - 文档知识库
  - 图谱知识库


- 用户端:

文档上传优化:
- 类型支持: 图片(png, jpeg, jpg, gif, bmp), 文档(pdf, docx, doc, txt, xlsx), 流媒体(mp3, mp4, wav, ogg, aac, flac, m4a, avi ,flv, wmv, mkv)
  - 音轨提取
  - 全类型转pdf预览
  - 全类型pdf内容翻译
- 上传进度显示
- 批量上传
- 上传容量限制
- 上传拥堵控制

知识源支持
- 知识源分类
- 选择、切换知识源
- 全选功能, 半选功能
- 默认知识源


ICP信息展示

问答
- 话题切换
- 关联标签
- 数据源(后端)的数据格式切换为markdown
- 参考及引用(召回)的预览
- 翻译
- 切换模型重新生成
- 添加设置最大引用(召回)数据
- 提示相关问题
- 追问功能
  - 上传文档并追问, 追问的时候关联到相关问答
- 相关图片展示
  - 通过关键字搜索
  - 加载更多图片
  - 预览
- 快捷键支持
- 图谱展示
  - 点击公司名, 使用公司名进行问答
- 股票行情展示
- 纯净模式 (?pure=on)
- PDF预览



知识源管理
- 知识源搜索
- 知识源懒加载
- 知识源的组织功能(添加文件夹归类, 移动, 删除)
- 文件状态显示
- 文件上传状态显示
- 文件的移动删除
- 文件的预览(转成pdf预览)


话题历史记录
- 无限滚动
- 分页加载
- 组织功能(添加文件夹归类, 移动, 删除, 拖拽移动, 撤销)
- 手动的会话归类(使用文件夹, 重命名)

资讯展示
- @应用创新部 开发

写作:
- 大纲编辑
- 召回
- 重新生成内容
- 继续写作(追问)
- 历史记录查看

设置:
- 个人资料设置
- 账户设置
- 模型相关的设置

登录 & 注册 & 找回密码
- 行为验证码

## 问题
- el-tree性能差
- store不够好用
- web和electron之间代码merge不方便, 很难统一
- electron的依赖难安装
- electron构建不完善
- 知识源混乱(数据结构乱难处理)、概念不清晰
- markdown结构不良(每次推送不一定是一个完整的markdown元素)
- markdown结构复杂时, 翻译不能返回一个完整的markdown
- antd整合不好
- typescript和vue的宏整合不好
- element样式和产品设计风格不一致(更偏向于antd)
- 新建文件夹, 文件夹的深度不明确
